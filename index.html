<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PragnaAI: Parkinson's Disease Voice Analysis</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind to use custom colors and classes -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#3b82f6',
                        'primary-cyan': '#06b6d4',
                        'bg-dark': '#111827',
                        'card-dark': '#1f2937',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- Use Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the progress circle */
        .progress-circle {
            transform: rotate(-90deg);
        }
        .progress-bar {
            transition: stroke-dashoffset 1s ease-in-out;
        }
        /* Style for interactive buttons (using the base Tailwind classes) */
    </style>
</head>
<body class="bg-bg-dark font-sans text-gray-100 min-h-screen p-4 sm:p-8">

    <header class="flex justify-between items-center mb-10 pb-4 border-b border-gray-700">
        <div>
            <h1 class="text-4xl font-extrabold text-blue-500">PragnaAI</h1>
            <p class="text-lg text-gray-400">Parkinson's Disease Voice Analysis</p>
        </div>
        <div class="flex items-center text-sm font-medium">
            <span class="mr-2">Status:</span>
            <div id="status-dot" class="w-3 h-3 rounded-full mr-1 bg-red-500"></div>
            <span id="status-text" class="text-red-400">Not Connected</span>
        </div>
    </header>

    <!-- Main Content & Dashboard Grid -->
    <div class="flex-1 grid grid-cols-1 lg:grid-cols-4 gap-6">
        
        <!-- Main Dashboard Area (3 Cards in 3/4 width) -->
        <div class="lg:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-fr">
            
            <!-- Card 1: Voice Recording -->
            <div class="md:col-span-1 flex flex-col bg-card-dark p-6 rounded-xl shadow-2xl transition duration-300 hover:shadow-primary-cyan/30">
                <h2 class="text-xl font-semibold mb-4 text-white flex items-center">
                    <!-- Mic Icon (Placeholder SVG for Lucide) -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-2 text-primary-cyan"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
                    Voice Recording
                </h2>
                
                <div id="timer-display" class="text-6xl font-extrabold text-white mb-8">
                    00:00
                </div>

                <div class="flex gap-4 mb-8">
                    <button id="start-btn" onclick="startRecording()" class="flex-1 flex items-center justify-center py-3 rounded-xl font-bold transition-all duration-200 bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/50">
                        <!-- Mic Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
                        Start Recording
                    </button>
                    <button id="stop-btn" onclick="stopRecording()" disabled class="w-1/3 flex items-center justify-center py-3 rounded-xl font-bold transition-all duration-200 bg-gray-700 text-gray-500 cursor-not-allowed">
                        <!-- Pause Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                        Stop
                    </button>
                </div>

                <button id="playback-btn" onclick="playback()" class="flex items-center justify-center py-4 rounded-xl font-bold text-lg transition-all duration-200 bg-primary-cyan hover:bg-cyan-700 text-white shadow-lg shadow-primary-cyan/50">
                    <!-- Play Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    Playback
                </button>
            </div>

            <!-- Card 2: Analysis Results -->
            <div class="md:col-span-1 flex flex-col bg-card-dark p-6 rounded-xl shadow-2xl transition duration-300 hover:shadow-primary-cyan/30 text-center items-center justify-center">
                <h2 class="text-xl font-semibold mb-8 text-white flex items-center justify-center">
                    <!-- Zap Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-2 text-primary-cyan"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                    Analysis Results
                </h2>

                <div class="relative w-48 h-48 mb-8">
                    <!-- Progress Circle -->
                    <svg class="w-full h-full progress-circle" viewBox="0 0 100 100">
                        <circle 
                            class="text-gray-700 stroke-current"
                            stroke-width="8" 
                            cx="50" cy="50" r="44" 
                            fill="transparent"
                        ></circle>
                        <circle 
                            id="progress-bar"
                            class="text-primary-cyan stroke-current progress-bar"
                            stroke-width="8" 
                            cx="50" cy="50" r="44" 
                            fill="transparent"
                            stroke-dasharray="276.46"
                            stroke-dashoffset="276.46"
                            stroke-linecap="round"
                        ></circle>
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <span id="analysis-percentage" class="text-5xl font-extrabold text-white">0%</span>
                    </div>
                </div>

                <h3 id="analysis-status" class="text-3xl font-bold text-white mb-2">No Analysis</h3>
                <p id="analysis-message" class="text-gray-400">Record voice to begin Parkinson's disease analysis</p>
            </div>

            <!-- Card 3: Voice Analysis Graph -->
            <div class="md:col-span-1 flex flex-col bg-card-dark p-6 rounded-xl shadow-2xl transition duration-300 hover:shadow-primary-cyan/30">
                <h2 class="text-xl font-semibold mb-4 text-white flex items-center">
                    <!-- BarChart2 Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-2 text-primary-cyan"><line x1="12" x2="12" y1="20" y2="10"/><line x1="18" x2="18" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="16"/></svg>
                    Voice Analysis Graph
                </h2>
                
                <!-- Tabs -->
                <div class="flex space-x-2 mb-4" id="graph-tabs">
                    <button data-tab="Waveform" class="tab-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 bg-primary-cyan text-white shadow-md">Waveform</button>
                    <button data-tab="Spectrum" class="tab-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 bg-gray-700 text-gray-300 hover:bg-gray-600">Spectrum</button>
                    <button data-tab="Pitch" class="tab-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 bg-gray-700 text-gray-300 hover:bg-gray-600">Pitch</button>
                </div>

                <!-- Graph Area (Placeholder) -->
                <div class="relative bg-gray-900 p-2 rounded-lg flex-1 h-72 lg:h-auto min-h-[200px] overflow-hidden">
                    <div class="absolute inset-0 flex">
                        <!-- Y-Axis Labeling -->
                        <div class="w-12 pt-4 flex flex-col justify-between text-right text-xs text-gray-500 font-mono">
                            <span>1.0</span><span>0.9</span><span>0.8</span><span>0.7</span><span>0.6</span><span>0.5</span><span>0.4</span><span>0.3</span><span>0.2</span><span>0.1</span><span class="mt-auto">0</span>
                            <span class="absolute transform -rotate-90 origin-bottom-left bottom-1/2 left-0 ml-1 -translate-y-1/2 text-gray-400 font-sans text-sm">Amplitude</span>
                        </div>

                        <!-- Graph space -->
                        <div class="flex-1 border-l border-b border-gray-700 grid grid-cols-10 grid-rows-10 p-1">
                            <!-- Grid lines (Mock) -->
                            <div class="absolute inset-0 grid grid-cols-10 grid-rows-10">
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-2"></div>
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-3"></div>
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-4"></div>
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-5"></div>
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-6"></div>
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-7"></div>
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-8"></div>
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-9"></div>
                                <div class="col-span-full border-b border-dashed border-gray-700/50 row-start-10"></div>
                                
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-2"></div>
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-3"></div>
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-4"></div>
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-5"></div>
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-6"></div>
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-7"></div>
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-8"></div>
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-9"></div>
                                <div class="row-span-full border-l border-dashed border-gray-700/50 col-start-10"></div>
                            </div>
                            <!-- Placeholder Text -->
                            <div id="graph-placeholder" class="absolute inset-0 flex items-center justify-center text-gray-500 text-xl font-light">
                                [Waveform Data Visualization]
                            </div>
                        </div>
                    </div>
                    <!-- X-Axis Label -->
                    <div class="absolute bottom-1 right-2 text-xs text-gray-500">Time (s)</div>
                </div>
            </div>
        </div>

        <!-- Sidebar / Model Info (1/4 width) -->
        <div class="lg:col-span-1">
            <div class="bg-card-dark p-6 rounded-xl shadow-2xl transition duration-300 hover:shadow-primary-cyan/30 mt-6 lg:mt-0">
                <h3 class="text-xl font-bold mb-4 text-white flex items-center">
                    <!-- Brain Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-2 text-primary-cyan"><path d="M12 4a3 3 0 0 0-3 3v2a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3v2a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3v-2a3 3 0 0 0 3-3v-2a3 3 0 0 0-3-3V7a3 3 0 0 0-3-3h-6Z"/><path d="M12 4a3 3 0 0 0 0 6M12 14a3 3 0 0 0 0 6"/></svg>
                    Model Information
                </h3>

                <div class="flex items-center mb-6 text-sm">
                    <div id="backend-status-dot" class="w-3 h-3 rounded-full mr-2 bg-red-500"></div>
                    <span id="backend-status-text" class="text-red-400">Backend Unavailable</span>
                </div>

                <!-- Info Items -->
                <div class="info-item p-4 bg-gray-700/50 rounded-lg mb-3 shadow-inner">
                    <h4 class="text-sm text-gray-400 font-medium flex items-center mb-1">
                        <!-- Zap Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2 text-primary-cyan"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                        Training Data
                    </h4>
                    <p class="text-white font-semibold">UCI Parkinson Speech Dataset</p>
                </div>
                
                <div class="info-item p-4 bg-gray-700/50 rounded-lg mb-3 shadow-inner">
                    <h4 class="text-sm text-gray-400 font-medium flex items-center mb-1">
                        <!-- Target Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2 text-primary-cyan"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                        Algorithm
                    </h4>
                    <p class="text-white font-semibold">Random Forest Classifier</p>
                </div>

                <div class="info-item p-4 bg-gray-700/50 rounded-lg mb-3 shadow-inner">
                    <h4 class="text-sm text-gray-400 font-medium flex items-center mb-1">
                        <!-- CheckCircle Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2 text-primary-cyan"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M9 11l3 3L22 4"/></svg>
                        Accuracy
                    </h4>
                    <p class="text-white font-semibold">95% Detection Rate</p>
                </div>

            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="mt-12 pt-6 border-t border-gray-800 text-center text-gray-500">
        <p class="text-sm mb-1">Advanced voice analysis for Parkinson's disease research</p>
        <a href="mailto:pragna.ai.bio@gmail.com" class="text-blue-400 hover:text-blue-300 transition-colors duration-150 flex items-center justify-center mb-4">
            <!-- Mail Icon -->
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/></svg>
            pragna.ai.bio@gmail.com
        </a>
        <p class="text-xs">&copy; 2025 PragnaAI. For research purposes only.</p>
    </footer>

    <script>
        const DOM = {
            startBtn: document.getElementById('start-btn'),
            stopBtn: document.getElementById('stop-btn'),
            timerDisplay: document.getElementById('timer-display'),
            progressBar: document.getElementById('progress-bar'),
            analysisPercentage: document.getElementById('analysis-percentage'),
            analysisStatus: document.getElementById('analysis-status'),
            analysisMessage: document.getElementById('analysis-message'),
            graphPlaceholder: document.getElementById('graph-placeholder'),
            tabButtons: document.querySelectorAll('.tab-btn'),
        };

        let isRecording = false;
        const CIRCLE_CIRCUMFERENCE = 2 * Math.PI * 44; // From the SVG r="44"

        // --- Core Application Logic ---

        function updateAnalysisResults(percentage) {
            const offset = CIRCLE_CIRCUMFERENCE * (1 - percentage / 100);
            DOM.progressBar.style.strokeDashoffset = offset;
            DOM.analysisPercentage.textContent = `${percentage}%`;

            if (percentage > 0) {
                DOM.analysisStatus.textContent = 'Analysis Complete';
                DOM.analysisMessage.textContent = 'Review detailed diagnostic metrics below.';
            } else {
                DOM.analysisStatus.textContent = 'No Analysis';
                DOM.analysisMessage.textContent = "Record voice to begin Parkinson's disease analysis";
            }
        }

        function startRecording() {
            if (isRecording) return;
            isRecording = true;
            
            // UI Updates
            DOM.startBtn.classList.replace('bg-blue-600', 'bg-gray-700');
            DOM.startBtn.classList.replace('hover:bg-blue-700', 'hover:bg-gray-700');
            DOM.startBtn.classList.remove('shadow-lg', 'shadow-blue-500/50');
            DOM.startBtn.classList.add('text-gray-500', 'cursor-not-allowed');
            DOM.startBtn.disabled = true;

            DOM.stopBtn.classList.replace('bg-gray-700', 'bg-red-600');
            DOM.stopBtn.classList.replace('text-gray-500', 'text-white');
            DOM.stopBtn.classList.add('hover:bg-red-700', 'shadow-lg', 'shadow-red-500/50');
            DOM.stopBtn.disabled = false;

            updateAnalysisResults(0);
            DOM.timerDisplay.textContent = '00:00';
            
            console.log('Recording started...');
            // In a real application, you would initialize MediaRecorder here
        }

        function stopRecording() {
            if (!isRecording) return;
            isRecording = false;
            
            // UI Updates
            DOM.startBtn.classList.replace('bg-gray-700', 'bg-blue-600');
            DOM.startBtn.classList.replace('hover:bg-gray-700', 'hover:bg-blue-700');
            DOM.startBtn.classList.add('shadow-lg', 'shadow-blue-500/50');
            DOM.startBtn.classList.remove('text-gray-500', 'cursor-not-allowed');
            DOM.startBtn.disabled = false;

            DOM.stopBtn.classList.replace('bg-red-600', 'bg-gray-700');
            DOM.stopBtn.classList.replace('hover:bg-red-700', 'hover:bg-gray-700');
            DOM.stopBtn.classList.remove('shadow-lg', 'shadow-red-500/50');
            DOM.stopBtn.classList.add('text-gray-500', 'cursor-not-allowed');
            DOM.stopBtn.disabled = true;

            // Mock Analysis
            const mockResult = 78; // Example result
            updateAnalysisResults(mockResult);

            console.log('Recording stopped. Running mock analysis...');
            // In a real application, you would stop MediaRecorder and send data to the backend here
        }

        function playback() {
            console.log('Playback initiated...');
            // In a real application, you would play back the recorded audio here
        }

        // --- Graph Tab Switching Logic ---
        DOM.tabButtons.forEach(button => {
            button.addEventListener('click', function() {
                const newTab = this.getAttribute('data-tab');

                // Update Button Styles
                DOM.tabButtons.forEach(btn => {
                    btn.classList.remove('bg-primary-cyan', 'text-white', 'shadow-md');
                    btn.classList.add('bg-gray-700', 'text-gray-300', 'hover:bg-gray-600');
                });
                this.classList.add('bg-primary-cyan', 'text-white', 'shadow-md');
                this.classList.remove('bg-gray-700', 'text-gray-300', 'hover:bg-gray-600');

                // Update Placeholder Text
                DOM.graphPlaceholder.textContent = `[${newTab} Data Visualization]`;
            });
        });

        // Initialize progress bar to 0% on load
        window.onload = () => {
            DOM.progressBar.style.strokeDashoffset = CIRCLE_CIRCUMFERENCE;
        };
    </script>

</body>
</html>
